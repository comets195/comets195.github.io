I"<h1 id="역할-책임-협력">역할, 책임, 협력</h1>

<p>객체지향 패러다임의 핵심은 역할(role), 책임(responsibilty), 협력(collaboration)이다. 2장에 있었던 내용들이 안중요한건 아니지만 구현에 너무 치우쳐져 있던 설명이었다. 객체지향 패러다임의 본질과는 조금 거리가 멀다.</p>

<p>객체지향의 본질은 협력하는 객체들의 공동체를 만들어 내는것. → 적절한 객체를 찾고, 적절한 책임을 할당하는 과정에서 만들어진다.</p>

<p>즉, 구현 메커니즘은 이러한 일들이 어느정도 자리를 잡은 후에야 해야한다.</p>

<p>→너무 이른시기에 구현을 해버리면 유연하지 못한 코드를 만들기 쉽다.</p>

<h1 id="협력">협력</h1>

<p>객체지향 시스템은 자율적인 객체들의 공동체다. 각각의 작은 객체들은 <strong>시스템의 기능이라는 목표를 달성하기위해 서로 협력하는 사회적인 존재</strong>이다. 자기가 처리 할 수 없는 일을 다른 객체에게 위임하면 전체적인 자율성을 높일 수 있다.</p>

<p>객체가 다른 객체에게 도움을 요청하는 유일한 방법은 <strong>메시지 전송(message sending)</strong>이다.</p>

<p>→ 객체는 다른 객체의 상세한 내부 구현에 접근 할 수 없기 때문에 오직 메시지를 통해서만 자신의 요청을 전달 가능.</p>

<p>수신 받은 객체가 메시지를 처리할 방법을 스스로 선택한다!</p>

<p>객체를 자율적으로 만드는 가장 기본적인 방법</p>

<ol>
  <li>내부 구현을 <strong>캡슐화</strong> 하는 것</li>
</ol>

<p>어떤걸 가지고 캡슐화 하는 걸까?(상태와 행동)
객체는 상태와 행동을 함께 캡슐화 하는데, 어떤 기준으로 이걸 갖게 만들까?
객체가 참여하고 있는 협력에 따라 상태와 행동은 달라지게 된다. 다시말해, <strong>협력</strong>은 객체가 필요한 이유와 객체가 수행하는 행동의 동기를 제공한다.</p>

<p>예) Movie객체가 영화까지 play를 할것 같지만, 실제로 영화 예매 시스템에서는 Movie는 단지 요금을 계산하는 행동과 관련된 것만 있다. 예매를 하기위해 협력에 참여하고 있고, 요금을 계산하는데 책임이 있다는 뜻이다.</p>

<p>객체의 행동을 결정하는 것이 협력이라면,
객체의 상태를 결정하는 것은 행동이다.
상태는 객체가 행동하는데 필요한 정보에 의해 결정되고,
행동은 협력 안에서 객체가 처리할 메시지로 결정한다.</p>

<p>즉, 객체가 참여하는 협력이 객체를 구성하는 행동과 상태를 모두 결정함. → 협력은 객체 설계에 필요한 <strong>문맥(context)</strong>를 제공한다.</p>

<h1 id="책임">책임</h1>

<p>협력에 참여하기 위해 객체가 수행하는 행동을 <strong>책임</strong> 이라 부른다. 객체의 책임을 크게 두가지 범주로 나누어 세분화 한다.</p>

<h3 id="하는-것doing">하는 것(doing)</h3>

<ul>
  <li>객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것</li>
  <li>다른 객체의 행동을 시작시키는 것</li>
  <li>다른 객체의 활동을 제어하고 조절하는 것</li>
</ul>

<h3 id="아는-것knowing">아는 것(knowing)</h3>

<ul>
  <li>사적인 정보에 관해 아는 것</li>
  <li>관련된 객체에 관해 아는 것</li>
  <li>자신이 유도하거나 계산할 수 있는 것에 관해 아는 것</li>
</ul>

<p>협력 안에서 객체에게 할당한 책임이 ⇒ 외부의 인터페이스 &amp; 내부의 속성을 결정.
결국 하는 것과 아는 것은 밀접하게 연관되어있으며 객체에게 책임을 할당하기 위한 가장 기본적인 원칙에 대한 힌트를 제공한다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것"
 - 크레이그 라만
</code></pre></div></div>
<p>객체에게 할당할 책임을 결정할 수 있는 문맥을 제공하는건 협력이다. 협력을 잘 구분짓자.
객체에게 얼마나 적절한 책임을 할당하느냐가 설계의 전체적인 품질을 결정한다.</p>

<p>구현방법 « 책임 책임을 결정한후에 구현을 고민해도 늦지않다.</p>

<ul>
  <li>정보 전문가 패턴: 해당 기능, 정보를 제일 잘알고있는 전문가에게 책임을 할당하는 패턴.</li>
</ul>

<h3 id="협력을-설계하는-출발점">협력을 설계하는 출발점</h3>

<p>사용자에게 제공하는 기능 (하나의 큰 책임) → 이것을 완료하기 위한 더 작은 책임을 찾고 객체에게 할당 → 반복.</p>

<p>객체에게 책임을 수행하게 하는 유일한 방법은 <strong>메시지를 전송하는</strong> 것 뿐이다.</p>
<ol>
  <li>즉  책임을 할당한다는 것은 메시지의 이름을 결정하는 것과 같다.</li>
  <li>메시지를 처리할 적절한 객체 선택. 정보 전문가 선택
→ 이렇게 결정된 메시지가 객체의 <strong>Public Interface</strong>가 되는 것이다!!</li>
</ol>

<h3 id="책임-주도-설계responsibility-driven-design-rdd">책임 주도 설계(Responsibility-Driven Design, RDD)</h3>

<p>책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법
책임을 할당할 때 고려해야 하는 두 가지 요소</p>

<h3 id="메시지가-객체를-결정한다">메시지가 객체를 결정한다</h3>

<p>객체에게 책임을 할당하는 데 필요한 메시지를 먼저 정의하고, 메시지를 처리할 객체를 나중에 선택한 것이 중요하다. <strong>(메시지가 객체를 선택했다.)</strong> 객체가 충분히 컴팩트한 인터페이스를 가지게 하고 싶다면 메시지가 객체를 결정하게 해야한다.</p>

<h3 id="행동이-상태를-결정한다">행동이 상태를 결정한다</h3>

<p>상태를 먼저 정의하고 그에 맞는 행동을 정의하면 캡슐화에 저해된다. 항상 협력이라는 문맥(context)안에서 객체를 생각해야한다.
행동이 중요하다. 상태 ㄴㄴ 
협력이 객체의 행동을 결정하고 행동이 상태를 결정한다. 그리고 그 행동이 객체의 책임이 된다.</p>

<h1 id="역할">역할</h1>

<p>책임의 집합 = 역할
역할은 다른 것으로 교체할 수 있는 책임의 집합이다.
<img src="/assets/images/post-object-2/역할1.png" alt="" class="align-center" /></p>

<p>할인 요금을 계산하라! 에 대한 메시지를 Amount, Percent각각 구현한다면 코드 중복이다. 따라서 역할로 생각하여 추상화한다.
협력에 적합한 책임을 수행하는 대상이 한 종류라면 간단하게 객체로 간주, 그렇지 않고 여러종류의 객체가 참여할 수 있다면 역할.</p>

<p><img src="/assets/images/post-object-2/역할2.png" alt="" class="align-center" /></p>

<p>초반엔 도메인 영역에서 개념, 객체와 역할이 어지럽게 뒤섞여 있으며, 사람들이 세상을 이해할 때 무의식적으로 개념, 객체, 역할을 뒤섞기 때문이다.</p>

<p>설계 초반엔 적절한 책임과 협력의 큰그림을 탐색하고, 단순하게 객체로 시작했다가 반복적으로 책임과 협력을 정제하면서 필요한 순간에 객체를 역할로 분리해 내는게 가장 좋은 방법.</p>

<p>작게 시작→역할로 변경. 작게 시작하는 것 부터 구현하라는게 아니라, 책임과 협력을 기준으로 먼저 생각해야한다.</p>

<ul>
  <li>틀린점이나 이상한점이 있다면 제보 감사합니다. :)</li>
</ul>

<h2 id="참고">참고</h2>
<ul>
  <li>모든 그림과 내용은
<a href="http://www.yes24.com/Product/Goods/74219491" title="책사기!">오브젝트: 코드로 이해하는 객체지향 설계 - 조영호</a>
님의 책에서 나온 내용입니다.</li>
</ul>

:ET